{% extends 'invoices/layout.html' %}

{% block body %}
<div class="container mt-5 mb-5">
  <h1>Create new invoice</h1>

  <form action="{{ url_for('invoices.new') }}">
    <div class="row">
      <div class="col">
        <select name="customer" class="form-control">
          {% for customer in customers %}
          <option value="{{ customer.internal_id }}" {{ 'selected' if args.customer == customer.internal_id }}>
            {{ customer.name }}
          </option>
          {% endfor %}
        </select>
      </div>
      <div class="col">
        <button class="button form-control">Update samples</button>
      </div>
    </div>
  </form>

  <form action="{{ url_for('invoices.index') }}" method="POST" class="mt-3">
    <input type="hidden" name="customer" value="{{ args.customer }}">
    <div class="form-group">
      <label>Discount (%)</label>
      <input type="number" class="form-control" name="discount" value="0">
    </div>
    <div class="form-group">
      <label>Comment</label>
      <textarea class="form-control" name="comment" rows="3"></textarea>
    </div>
    <ul class="list-group">
      {% for sample in samples %}
      <li class="list-group-item">
        <div class="form-check mb-0">
          <div class="row">
            <div class="col">
              <label class="form-check-label">
                <input class="form-check-input" type="checkbox" name="samples" value="{{ sample.internal_id }}"> {{ sample.internal_id }}
              </label>
            </div>
            <div class="col">
              {{ sample.received_at.date() }}
            </div>
            <div class="col">
              {{ sample.application_version.application.tag }}
            </div>
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
    <button class="btn btn-primary form-control mt-3" type="submit">Generate invoice</button>
  </form>
</div>
{% endblock %}

